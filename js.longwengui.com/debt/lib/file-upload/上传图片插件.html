{template Header}
<link rel="stylesheet" type="text/css" href="{echo JsURL}/debt/lib/file-upload/webuploader.css">
<div style="height: 300px;">
  <div id="uploader" class="wu-example">
      <!--用来存放文件信息-->
      <div id="thelist" class="uploader-list"></div>
      <div class="btns">
          <div id="picker">选择文件</div>
          <button id="ctlBtn" class="btn btn-default">开始上传</button>
      </div>
  </div>
</div>
{template Footer}
<script type="text/javascript" src="{echo JsURL}/debt/lib/file-upload/webuploader.js"></script>
<script type="text/javascript" src="{echo JsURL}/debt/lib/ajaxFileUpload/ajaxfileupload.js"></script>
<script type="text/javascript">
var uploader = WebUploader.create({

  // swf文件路径
  swf: '/Plugins/Uploader/Uploader.swf',

  // 文件接收服务端。
  server: '/loginajax.html',
  method: 'post',

  // 选择文件的按钮。可选。
  // 内部根据当前运行是创建，可能是input元素，也可能是flash.
  pick: '#picker',
  formData: {
    "Intention":"AddHeadImage"
  },

  // 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！
  resize: false,
  // 只允许选择图片文件。
  accept: {
    title: 'Images',
    extensions: 'gif,jpg,jpeg,bmp,png',
    mimeTypes: 'image/*'
  }
});
  $('#ctlBtn').click(function(){
    uploader.upload();
  });
  uploader.on( 'uploadSuccess', function( file ) {
      $( '#'+file.id ).find('p.state').text('已上传');
  });

  uploader.on( 'uploadError', function( file ) {
      $( '#'+file.id ).find('p.state').text('上传出错');
  });

  uploader.on( 'uploadComplete', function( file ) {
      $( '#'+file.id ).find('.progress').fadeOut();
  });
</script>
